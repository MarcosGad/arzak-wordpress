!function(i){"use strict";i(document).ready(function(){function o(e){e=e||"",i(".memberModalRegister").modal("hide"),i(".memberModalRegister").find(".noo-ajax-result").html("").hide(),i(".memberModalLogin").modal("show"),""!==e?i(".memberModalLogin").find(".noo-ajax-result").show().html('<span class="success-response">'+e+"</span>"):i(".memberModalLogin").find(".noo-ajax-result").html("").hide()}function a(e){e=e||"",i(".memberModalLogin").modal("hide"),i(".memberModalLogin").find(".noo-ajax-result").html("").hide(),i(".memberModalRegister").modal("show"),""!==e?i(".memberModalRegister").find(".noo-ajax-result").show().html('<span class="success-response">'+e+"</span>"):i(".memberModalRegister").find(".noo-ajax-result").html("").hide()}i(document).on("click",".add-new-location-btn",function(e){return e.stopPropagation(),e.preventDefault(),i(".add-new-location-content").toggle(),!1}),i(document).on("click",".add-new-location-submit",function(e){e.stopPropagation(),e.preventDefault();var t=i(this),o=i("#noo-map-address").val(),a=i("#noo-map-lon").val(),n=i("#noo-map-lat").val();return""!=i.trim(o)&&(t.prop("disabled","disabled").prepend('<i class="fa fa-spinner fa-spin"></i>'),i.post(nooMemberL10n.ajax_url,{action:"add_new_job_location",location:o,long:a,lat:n,security:nooMemberL10n.ajax_security},function(e){if(1==e.success){var o=i("<option>"),a=i(".job_location_field").find(".form-control-chosen"),n=e.location_id;o.text(e.location_title).val(n),o.prop("selected",!0).attr("selected","selected"),a.is("[multiple]")||a.find("option:selected").attr("selected",!1),a.append(o),a.multiselect("rebuild"),i("#noo-map-address").val(""),i("#modalLocationPicker").modal("hide")}t.prop("disabled","").find("i").remove()},"json")),!1}),i(document).on("click",".member-register-link",function(e){return e.stopPropagation(),e.preventDefault(),a(i(this).attr("data-register-message")?i(this).data("register-message"):""),!1}),i(document).on("click",".member-login-link",function(e){return e.stopPropagation(),e.preventDefault(),o(i(this).attr("data-login-message")?i(this).data("login-message"):""),!1}),i("form.noo-ajax-login-form").on("submit",function(e){e.stopPropagation(),e.preventDefault();var o=i(this);return o.find(".noo-ajax-result").show().html(nooMemberL10n.loadingmessage),i.ajax({type:"POST",dataType:"json",url:nooMemberL10n.ajax_url,data:{action:"noo_ajax_login",log:o.find(".log").val(),pwd:o.find(".pwd").val(),remember:!!o.find(".rememberme").is(":checked"),security:o.find(".security").val(),redirect_to:o.find(".redirect_to").length?o.find(".redirect_to").val():""},success:function(e){"object"==typeof e&&null!=e?(o.find(".noo-ajax-result").show().html(e.message),1==e.loggedin&&(i("body").hasClass("interim-login")?(i("body").addClass("interim-login-success"),i(".wp-auth-check-close",window.parent.document).click()):null==e.redirecturl?document.location.reload():document.location.href=e.redirecturl)):document.location.reload()},complete:function(){},error:function(){o.off("submit"),o.submit()}}),!1}),i(".job-manage-action.action-delete").click(function(){return confirm(nooMemberL10n.confirm_delete)}),i("form.noo-ajax-register-form").on("submit",function(e){e.stopPropagation(),e.preventDefault();var o=i(this);if(0<o.find(".account_reg_term").length&&!o.find(".account_reg_term").is(":checked"))return o.find(".noo-ajax-result").hide(),alert(nooMemberL10n.confirm_not_agree_term),!1;o.find(".noo-ajax-result").show().html(nooMemberL10n.loadingmessage);var a=o.serializeArray();return i.ajax({type:"POST",dataType:"json",url:nooMemberL10n.ajax_url,data:a,success:function(e){"object"==typeof e&&null!=e?(o.find(".noo-ajax-result").show().html(e.message),void 0!==e.redirecturl&&null!=e.redirecturl&&""!=e.redirecturl?document.location.href=e.redirecturl:"undefined"!=typeof grecaptcha&&grecaptcha.reset()):document.location.reload()},complete:function(e){},error:function(e){o.off("submit"),o.submit()}}),!1}),i("form#candidate_profile_form").validate({onkeyup:!1,errorClass:"jform-error",validClass:"jform-valid",errorElement:"span",ignore:":hidden:not(.ignore-valid)",errorPlacement:function(e,o){o.is(":radio")||o.is(":checkbox")||o.is(":file")?e.appendTo(o.parent().parent()):e.appendTo(o.parent())}}),i("form#noo-ajax-update-password, form#noo-ajax-update-email").each(function(e){i(this).validate({onkeyup:!1,errorClass:"jform-error",validClass:"jform-valid",errorElement:"span",ignore:":hidden:not(.ignore-valid)",errorPlacement:function(e,o){o.is(":radio")||o.is(":checkbox")||o.is(":file")?e.appendTo(o.parent().parent()):e.appendTo(o.parent())},submitHandler:function(e){var o=i(e);o.find(".noo-ajax-result").show().html(nooMemberL10n.loadingmessage),i.ajax({type:"POST",dataType:"json",url:nooMemberL10n.ajax_url,data:o.serializeArray(),success:function(e){o.find(".noo-ajax-result").show().html(e.message),1==e.success&&(null==e.redirecturl?document.location.reload():document.location.href=e.redirecturl)},complete:function(){},error:function(){o.off("submit"),o.submit()}})}}),i(this).on("submit",function(e){e.stopPropagation(),e.preventDefault(),i(this).validate()})}),i("form#post_resume_form").validate({onkeyup:!1,errorClass:"jform-error",validClass:"jform-valid",errorElement:"span",ignore:":hidden:not(.ignore-valid)",errorPlacement:function(e,o){o.is(":radio")||o.is(":checkbox")||o.is(":file")?e.appendTo(o.parent().parent()):e.appendTo(o.parent())}}),i("form#add_job_alert_form").validate({onkeyup:!1,errorClass:"jform-error",validClass:"jform-valid",errorElement:"span",ignore:":hidden:not(.ignore-valid)",errorPlacement:function(e,o){o.is(":radio")||o.is(":checkbox")||o.is(":file")?e.appendTo(o.parent().parent()):e.appendTo(o.parent())}}),i(".noo-clone-fields").on("click",function(){var e=i(this),o=i(e.data("template"));return e.closest(".noo-metabox-addable").find(".noo-addable-fields").append(o),o.find(".form-control-editor").wysihtml5({"font-styles":!0,blockquote:!0,emphasis:!0,lists:!0,html:!0,link:!0,image:!0,stylesheets:[wysihtml5L10n.stylesheet_rtl]}),i(".noo-remove-fields").on("click",function(){return i(this).parent(".fields-group").remove(),!1}),i(function(){i(".icon-picker").iconPicker()}),o.find("input:first-child").focus(),!1}),i(".noo-remove-fields").on("click",function(){return i(this).parent(".fields-group").remove(),!1}),i(document).on("click",".bulk-manage-application-action",function(e){e.preventDefault(),e.stopPropagation();var o=i(this),a=o.closest("form"),n=o.closest(".bulk-actions").find("select[name='action']").val();if(a.find("input[name='ids[]']:checked").length&&"-1"!==n){if("delete"==n)return a.submit(),!1;var t=a.find("input[name='ids[]']:checked").map(function(){return this.value}).get().join(",");a.find(".member-manage-table").block({message:null,overlayCSS:{backgroundColor:"#fff",opacity:.5,cursor:"wait"}}),i.post(nooMemberL10n.ajax_url,{action:"noo_approve_reject_application_modal",application_id:t,hander:n,security:nooMemberL10n.ajax_security},function(e){if(a.find(".member-manage-table").unblock(),e){var o=i(e);i("body").append(o),o.modal("show"),i("form#noo-ajax-approve-reject-application-form").validate({onkeyup:!1,onfocusout:!1,onclick:!1,errorClass:"jform-error",validClass:"jform-valid",errorElement:"span",ignore:":hidden:not(.ignore-valid)",errorPlacement:function(e,o){o.is(":radio")||o.is(":checkbox")||o.is(":file")?e.appendTo(o.parent().parent()):e.appendTo(o.parent())}}),o.on("hidden.bs.modal",function(){o.remove()})}})}return!1}),i(document).on("click",".member-manage-action.approve-reject-action",function(e){e.preventDefault(),e.stopPropagation();var a=i(this);return a.closest(".member-manage-table").block({message:null,overlayCSS:{backgroundColor:"#fff",opacity:.5,cursor:"wait"}}),i.post(nooMemberL10n.ajax_url,{action:"noo_approve_reject_application_modal",application_id:a.data("application-id"),hander:a.data("hander"),security:nooMemberL10n.ajax_security},function(e){if(a.closest(".member-manage-table").unblock(),e){var o=i(e);i("body").append(o),o.modal("show"),i("form#noo-ajax-approve-reject-application-form").validate({onkeyup:!1,onfocusout:!1,onclick:!1,errorClass:"jform-error",validClass:"jform-valid",errorElement:"span",ignore:":hidden:not(.ignore-valid)",errorPlacement:function(e,o){o.is(":radio")||o.is(":checkbox")||o.is(":file")?e.appendTo(o.parent().parent()):e.appendTo(o.parent())}}),o.on("hidden.bs.modal",function(){o.remove()})}}),!1}),i("a.bookmark-job").on("click",function(){var o=i(this);o.find(".fa").addClass("fa-spin");var a=o.hasClass("bookmarked");return i.ajax({type:"POST",dataType:"json",url:nooMemberL10n.ajax_url,data:{action:o.attr("data-action"),security:o.attr("data-security"),job_id:o.attr("data-job-id")},success:function(e){i(".noo-ajax-result").show().html(e.message),1==e.success&&(o.find(".fa").removeClass("fa-spin"),a?o.removeClass("bookmarked"):o.addClass("bookmarked"),o.closest(".job-action").find(".noo-ajax-result").show().html(e.message),o.find(".noo-bookmark-label").html(e.message_text),null==e.redirecturl||(document.location.href=e.redirecturl))},complete:function(){},error:function(){}}),!1}),i(document).on("click",".member-manage-action.view-employer-message",function(e){e.preventDefault(),e.stopPropagation();var a=i(this),n=a.html();a.html('<i class="fa fa-spinner fa-spin"></i>'),a.closest(".member-manage-table").block({message:null,overlayCSS:{backgroundColor:"#fff",opacity:.5,cursor:"wait"}}),i.post(nooMemberL10n.ajax_url,{action:"noo_employer_message_application_modal",application_id:a.data("application-id"),security:nooMemberL10n.ajax_security,mode:a.data("mode")||0},function(e){if(a.html(n),a.find(".fa").removeClass("fa-spin"),a.closest(".member-manage-table").unblock(),e){var o=i(e);i("body").append(o),o.modal("show"),o.on("hidden.bs.modal",function(){o.remove()})}})}),i(document).on("click",".auto_create_order_free",function(e){e.preventDefault();var o=i(this).data("id"),a=i(this).data("package"),n=i(this).data("security"),t=i(this).data("url-package");i.post(nooMemberL10n.ajax_url,{action:"auto_create_order",user_id:o,package_id:a,security:n},function(e){window.location.href=t})}),i("#contact_company_form").validate({onkeyup:!1,errorClass:"jform-error",validClass:"jform-valid",errorElement:"span",ignore:":hidden:not(.ignore-valid)",errorPlacement:function(e,o){o.is(":radio")||o.is(":checkbox")||o.is(":file")?e.appendTo(o.parent().parent()):e.appendTo(o.parent())},submitHandler:function(e){var o=i(e);o.find(".noo-ajax-result").show().html(nooMemberL10n.loadingmessage);var a=o.serializeArray();i.ajax({type:"POST",dataType:"json",url:nooMemberL10n.ajax_url,data:a,success:function(e){"object"==typeof e&&null!=e&&(o.find(".noo-ajax-result").show().html(e.message),1==e.success&&o.find("input, textarea").val(""))},complete:function(){},error:function(){o.off("submit"),o.submit()}})}}),i(document).on("click",".noo-follow-company",function(e){e.preventDefault();var o=i(this),a=o.data("company-id"),n=o.html(),t=o.data("user-id");i.ajax({url:nooMemberL10n.ajax_url,type:"POST",dataType:"json",data:{action:"noo_follow_company",company_id:a,user_id:t},beforeSend:function(){o.append('<i class="fa fa-spinner fa-spin"></i>')},success:function(e){"error"===e.status&&i.notify(e.message,{position:"right bottom",className:"error"}),o.html(n);try{"success"===e.status&&(o.html(e.label),o.closest(".noo-company-action").find(".total-follow > span").html(e.total))}catch(e){alert(e)}}})}),i(".noo-company-review").on("click",".noo-submit",function(e){e.preventDefault();var o=i(this),a=o.html(),n=o.data("url");i.ajax({url:nooMemberL10n.ajax_url,type:"POST",dataType:"json",data:o.closest(".noo-form-comment").serializeArray(),beforeSend:function(){o.append('<i class="fa fa-spinner fa-spin"></i>')},success:function(e){o.html(a),"success"===e.status?(o.closest(".noo-company-review").find(".noo-list-comment").append(e.html).fadeIn("slow"),i(".noo-rating").each(function(e,o){var a=i(this).data("readonly"),n=i(this).data("score-name");i(this).raty({score:5,readOnly:a,half:!0,scoreName:n})}),window.location.href=n):o.next().html(e.message)}})}),i(".noo-resume-review").on("click",".noo-review-submit",function(e){e.preventDefault();var o=i(this),a=o.html(),n=o.data("url");i.ajax({url:nooMemberL10n.ajax_url,type:"POST",dataType:"json",data:o.closest(".noo-form-resume-comment").serializeArray(),beforeSend:function(){o.append('<i class="fa fa-spinner fa-spin"></i>')},success:function(e){o.html(a),"success"===e.status?(o.closest(".noo-resume-review").find(".noo-list-comment").append(e.html).fadeIn("slow"),i(".noo-rating").each(function(e,o){var a=i(this).data("readonly"),n=i(this).data("score-name");i(this).raty({score:5,readOnly:a,half:!0,scoreName:n})}),window.location.href=n):o.next().html(e.message)}})}),i(".btn-print-resume").click(function(e){e.preventDefault();var o=i(this).data("resume"),a=i(this).data("total-review"),n=i(this).data("layout"),t=i(this).data("post-review"),r=window.open("","","width=1024 ,height=842");return i.ajax({url:nooMemberL10n.ajax_url,type:"POST",dataType:"html",data:{action:"noo_create_print_resume",resume:o,total:a,layout:n,post_review:t},success:function(e){try{r.document.write(e),r.document.close(),r.focus()}catch(e){}}}),!1}),i(document).on("click",".resume-contact button",function(e){e.preventDefault();var o=i(this),a=o.html(),n=o.closest(".resume-contact");i.ajax({url:nooMemberL10n.ajax_url,type:"POST",dataType:"json",data:n.serializeArray(),beforeSend:function(){n.find(".notice").html(""),o.append('<i class="fa fa-spinner fa-spin"></i>')},success:function(e){o.html(a);try{n.find(".notice").html(e.message)}catch(e){n.find(".notice").html(e)}}})})})}(jQuery);